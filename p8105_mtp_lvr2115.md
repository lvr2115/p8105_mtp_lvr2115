p8105_mtp_lvr2115
================
Laura Robles-Torres
2023-10-18

# Introduction

### These data are from Change of Address (COAs) forms received by the United States Post Office in New York City between 2018 and 2022. It includes the total number of COAs to and from each NYC zip code for each month of those 5 years. These COAs are filed by people who are moving to ensure that mail is delivered to their new address.

In each sheet, the TOTAL PERM IN and TOTAL PERM OUT indicate the total
number of permanent address changes going into and out of each ZIP code.

NYC is divided into five boroughs. Each of these boroughs is it’s own
county, and in some cases the borough name and county name differ; for
example, Manhattan is New York County. Moreover, boroughs are divided
into neighborhoods. COA data provided by USPS may not accurately reflect
NYC’s counties, boroughs, and neighborhoods, and a supplementary dataset
including these is available here.

``` r
zipcodes = 
  read_csv("./zip codes.csv") |> #import dataset
  janitor::clean_names() |> #clean var names
  mutate(
    borough = recode(county_name, 
                     "Bronx" = "The Bronx",
                     "Kings" = "Brooklyn",
                     "New York" = "Manhattan",
                     "Richmond" = "Staten Island") #create borough var based on county
)
```

    ## Rows: 324 Columns: 7
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (4): County Name, County Code, File Date, Neighborhood
    ## dbl (3): State FIPS, County FIPS, ZipCode
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
coa_2018 = 
  readxl::read_excel("./USPS CHANGE OF ADDRESS NYC.xlsx", sheet = "2018") |> #import dataset
  janitor::clean_names() |> #clean var names
  separate(month, into = c("year", "month_num", "day"), convert = TRUE) |> #create year var
   mutate(
    net_change = total_perm_in - total_perm_out) #Create net_change var 

coa_2019 = 
  readxl::read_excel("./USPS CHANGE OF ADDRESS NYC.xlsx", sheet = "2019") |> #import dataset
  janitor::clean_names() |> #clean var names
  separate(month, into = c("year", "month_num", "day"), convert = TRUE) |> #create year var
   mutate(
    net_change = total_perm_in - total_perm_out) #Create net_change var 

coa_2020 = 
  readxl::read_excel("./USPS CHANGE OF ADDRESS NYC.xlsx", sheet = "2020") |> #import dataset
  janitor::clean_names() |> #clean var names
  separate(month, into = c("year", "month_num", "day"), convert = TRUE) |> #create year var
   mutate(
    net_change = total_perm_in - total_perm_out) #Create net_change var 

coa_2021 = 
  readxl::read_excel("./USPS CHANGE OF ADDRESS NYC.xlsx", sheet = "2021") |> #import dataset
  janitor::clean_names() |> #clean var names
  separate(month, into = c("year", "month_num", "day"), convert = TRUE) |> #create year var
   mutate(
    net_change = total_perm_in - total_perm_out) #Create net_change var 

coa_2022 = 
  readxl::read_excel("./USPS CHANGE OF ADDRESS NYC.xlsx", sheet = "2022") |> #import dataset
  janitor::clean_names() |> #clean var names
  separate(month, into = c("year", "month_num", "day"), convert = TRUE) |> #create year var
   mutate(
    net_change = total_perm_in - total_perm_out) #Create net_change var 
```

``` r
combined_coa =
    bind_rows(coa_2018, coa_2019, coa_2020,coa_2021,coa_2022)
```
